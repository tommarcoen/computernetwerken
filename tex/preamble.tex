\usepackage[utf8]{inputenc}
\usepackage{csquotes}
\usepackage{babel}
\usepackage{multicol}
\setlength{\columnsep}{3em}

\input{colourscheme-syntra}
\usepackage{tufte}
\usepackage{fixme}
% pretend we're in book.cls
\makeatletter
\let\@lox@prtc\@lox@prtc@book
\makeatother
\fxusetheme{color}



% ============================================================
% Mathematics
% ============================================================

\usepackage{numprint}
\usepackage[per-mode=symbol]{siunitx}
%\AtBeginDocument{\sisetup{text-font-command=\oldstyle}}
\usepackage{bm}
\usepackage{upgreek}
\usepackage{amsmath}



% ============================================================
% Graphics
% ============================================================

\usepackage[final]{graphicx}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{pgf-pie}
\usetikzlibrary{arrows}
\usetikzlibrary{calc}
% Used to scale the tikzpicture to \textwidth
\usepackage{environ}
\makeatletter
\newsavebox{\measure@tikzpicture}
\NewEnviron{scaletikzpicturetowidth}[1]{%
  \def\tikz@width{#1}%
  \def\tikzscale{1}\begin{lrbox}{\measure@tikzpicture}%
  \BODY
  \end{lrbox}%
  \pgfmathparse{#1/\wd\measure@tikzpicture}%
  \edef\tikzscale{\pgfmathresult}%
  \BODY
}
\makeatother


% ============================================================
% Abbreviations and glossaries
% ============================================================

\usepackage[abbreviations,automake,stylemods=mcols,shortcuts=ac,nonumberlist,indexcrossrefs=true]{glossaries-extra}
\newcommand{\SC}[1]{\textsc{\MakeLowercase{#1}}}
\newcommand{\iacs}[1]{\index{#1@\acs{#1}}}
\newcommand{\iacl}[1]{\index{\acl{#1}}}
%\setabbreviationstyle{long-short-sc}
\setabbreviationstyle{long-short}
\renewcommand*{\glsabbrvscfont}[1]{\SC{#1}}
\makeglossaries
\loadglsentries{tex/abbreviations}
\loadglsentries{tex/glossary}
\glsdisablehyper

% Common abbreviations
\newcommand{\IP}{\acs{IP}}
\newcommand{\IPfour}{\acs{IP} version~4}
\newcommand{\IPsix}{\acs{IP} version~6}



% ============================================================
% Code listings and monospaced fonts
% ============================================================

\usepackage[final]{listings}
\lstset{
    basicstyle       = \ttfamily\small,
    numbers          = left,
    numberstyle      = \tiny,
    xleftmargin      = 1em,
    numbersep        = .75em,
    columns          = fullflexible,
    breaklines       = true,
    keepspaces       = true,
    breakindent      = 1em,
    frame            = tb,
    framerule        = .8pt,
    rulecolor        = \color{listingrulecolour}
}
\newfloat[chapter]{fltlisting}{lol}{Listing}

\usepackage[bitwidth=10pt]{bytefield}



% ============================================================
% Additional information or background information
% ============================================================

\usepackage[most]{tcolorbox}
\usepackage{fontawesome}
\newtcolorbox{extrainfo}{
   title = {\faUniversity\quad Extra information},
   colframe = BorderColourExtraInfo,
   colback = white,
   breakable = true
}
\usepackage{tabto}
\def\marginsymbol{\protect\marginsymbolhelper}
\def\marginsymbolhelper{\tabto*{-5mm}\makebox[0cm]{\faUniversity}\tabto*{\TabPrevPos}}
\newcommand{\extrap}[1]{\paragraph{#1\marginsymbol}}
\newcommand{\extrat}[1]{\newthought{#1\marginsymbol}}
\newcommand{\extras}[1]{\section[#1]{#1\protect\marginsymbol}}




% ============================================================
% Citations and index
% ============================================================

\addbibresource{bib/bibliography.bib}
\addbibresource{bib/rfc.bib}

% RFCs
\newcommand{\rfc}[1]{\acs{RFC}~\cite{rfc#1}}

% Index
\usepackage[xindy]{imakeidx}
\indexsetup{headers={\indexname}{\indexname}}
\makeindex[intoc,columns=2]



% ============================================================
% References and links
% ============================================================

\usepackage[nospace]{varioref}
\usepackage[final]{hyperref}
\usepackage{cleveref}
\urlstyle{rm}
\hypersetup{colorlinks=true,linktocpage,allcolors=black}
\creflabelformat{equation}{#2\textup{#1}#3} % remove the brackets from an equation reference, i.e. "eq. 2.1" instead of "eq. (2.1)"



