\tikzstyle{layer}=[
    minimum width=20mm,
    minimum height=8mm,
    inner sep=0mm,
    font=\small,
    text=black,
    node distance=12mm,
    draw=spot1,
    fill=spot1!20
]
\tikzstyle{arrow}=[->,>=stealth',semithick]
\tikzstyle{red arrow}=[arrow,<->,very thick,spot2]
\tikzstyle{packet data}=[
    rectangle,
    draw=spot4,
    fill=spot4!20,
    text=black,
    font=\small,
    thin,
    minimum height=7mm,
    minimum width=12mm,
    inner sep=0mm
]
\tikzstyle{packet header}=[
    rectangle,
    draw=spot5,
    fill=spot5!20,
    text=black,
    font=\small,
    thin,
    node distance=7mm,
    minimum size=7mm,
    inner sep=0mm
]
\begin{scaletikzpicturetowidth}{\textwidth}
\begin{tikzpicture}[scale=\tikzscale]

% two network stacks
\node[layer] (a1)               {application};
\node[layer] (t1) [below of=a1] {transport};
\node[layer] (n1) [below of=t1] {network};
\node[layer] (d1) [below of=n1] {data link};
\node[layer] (p1) [below of=d1] {physical};

\node[layer] (a2) [right of=a1,node distance=85mm]  {application};
\node[layer] (t2) [below of=a2]                     {transport};
\node[layer] (n2) [below of=t2]                     {network};
\node[layer] (d2) [below of=n2]                     {data link};
\node[layer] (p2) [below of=d2]                     {physical};

\draw[arrow] (a1) -- (t1);
\draw[arrow] (t1) -- (n1);
\draw[arrow] (n1) -- (d1);
\draw[arrow] (d1) -- (p1);

\draw[arrow] (t2) -- (a2);
\draw[arrow] (n2) -- (t2);
\draw[arrow] (d2) -- (n2);
\draw[arrow] (p2) -- (d2);

\draw[red arrow] (a1) to node[packet data] {data} (a2);
\draw[red arrow] (t1) to node[packet data] (dt) {data}
                         node[packet header,left of=dt,node distance=9mm] {\SC{T}}
                         (t2);
\draw[red arrow] (n1) to node[packet data] (dn) {data}
                         node[packet header,left of=dn,node distance=9mm] (hn1) {\SC{T}} node[packet header,left of=dn,node distance=16mm] (hn2) {\SC{N}}
                         (n2);
\draw[red arrow] (d1) to node[packet data] (dd) {data}
                         node[packet header,left of=dd,node distance=9mm] (hd1) {\SC{T}} node[packet header,left of=dd,node distance=16mm] (hd2) {\SC{N}} node[packet header,left of=dd,node distance=23mm] (hd3) {\SC{D}} node[packet header,right of=dd,node distance=9mm] (td) {\SC{D}}
                         (d2);
\end{tikzpicture}
\end{scaletikzpicturetowidth}